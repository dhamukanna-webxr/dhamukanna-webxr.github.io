<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Meta Quest Desert Locomotion + Cube Interaction</title>

    <!-- A-Frame core -->
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>

    <!-- Environment Component -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-environment-component/dist/aframe-environment-component.min.js"></script>

    <!-- aframe-extras (thumbstick locomotion) -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.6.0/dist/aframe-extras.min.js"></script>

    <!-- Register thumbstick locomotion -->
    <script>
      AFRAME.registerComponent('thumbstick-move', aframeExtras.controls.thumbstick);
    </script>

    <!-- Register cube interaction script -->
    <script>
      AFRAME.registerComponent('interact-cube', {
        init: function () {
          const el = this.el;

          el.addEventListener('mouseenter', () => {
            el.setAttribute('color', 'yellow');
          });

          el.addEventListener('mouseleave', () => {
            el.setAttribute('color', 'orange');
          });

          el.addEventListener('click', () => {
            el.setAttribute('scale', '1.5 1.5 1.5');
          });
        }
      });
    </script>
  </head>

  <body>
    <a-scene environment="preset: egypt;
                         ground: hills;
                         groundTexture: walkernoise;
                         groundColor: #EDC9Af;
                         grid: none;
                         skyColor: #FFD580;
                         lightPosition: 1 3 -2;
                         fog: 0.3">

      <!-- Camera Rig with locomotion + snap turning -->
      <a-entity id="rig"
                position="0 0 5"
                movement-controls="controls: gamepad"
                rotation-controls="enabled: true; snapTurn: true; snapDegrees: 30">

        <!-- Head (camera) -->
        <a-entity camera
                  look-controls
                  wasd-controls-enabled="false"
                  position="0 1.6 0">
        </a-entity>

        <!-- Left Controller -->
        <a-entity laser-controls="hand: left"
                  raycaster="objects: .clickable"
                  cursor="rayOrigin: entity"
                  thumbstick-move>
        </a-entity>

        <!-- Right Controller -->
        <a-entity laser-controls="hand: right"
                  raycaster="objects: .clickable"
                  cursor="rayOrigin: entity"
                  thumbstick-move>
        </a-entity>

      </a-entity>

      <!-- Interactable Cube -->
      <a-box id="myCube"
             class="clickable"
             position="0 1 -3"
             depth="0.5" height="0.5" width="0.5"
             color="orange"
             interact-cube>
      </a-box>

    </a-scene>
  </body>
</html>
